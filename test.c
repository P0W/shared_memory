/*	Source : test.c	This demonstrates the use of Shared Memory Block using a shared object	Author : _P0W!*//*	Compile Using :		Linux :	gcc -o test test.c shared_mem.so -Wall -DUSE_DLLOR	Windows :	gcc -o test test.c shared_mem.dll -Wall -DUSE_DLL		Note: Make sure the .dll or .so is present where test.exe resides or set the PATH environment variable appropiately		CAUTION: If no calls to remove_shem() is made, any any process , this may result in excessive memory leaks !*/#include<stdio.h>#include<string.h>#include "shared_mem.h" // The dll interfaceint main(int argc, char *argv[]) {    int p=4;	   	    if(argc == 3 && ( strcmpi(argv[1], "-server") == 0 )) // Run as: - test.exe server    {		 //RemoveSharedMemory(argv[2]);  //Ensure same shared memory never existed		         //CreateSharedMemory("P0W",sizeof(int)); //Assuming an external process has created a Shared Memory Block "P0W"        while(1)        {            printf("Enter Number:");            while( fscanf(stdin,"%d",&p) != 1 );            WriteSharedMemory(argv[2], (char *)&p);        }    }    else if(argc == 3 && ( strcmpi(argv[1], "-client") == 0 ))    {         while(1)         {            ReadSharedMemory(argv[2], (char *)&p);             printf("Read =%d\n", p);         }    }      else 	{		printf("Usage :\n %s <option> <Shared Memory Name>\n\toption:\n\t-server Write to SharedMemory \n\t-client Read from SharedMemory", argv[0]);	}	return 0;}